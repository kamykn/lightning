{"version":3,"sources":["webpack:///./assets/js/index.js","webpack:///./assets/scss/style.scss?dcd2"],"names":["Vue","use","VueRx","window","onload","init","muff","setReturnListLength","vueInit","vm","el","data","inputValue","currentSearchType","searchTypes","history","bookmarks","tabs","methods","setBookmarksTab","search","Promise","resolve","results","setSearchResultsToData","list","setHistoryTab","startTime","Date","getTime","query","text","maxResults","historyList","chrome","reverseResult","reverse","forEach","result","push","url","title","setSearchWordList","setTabsTab","currentWindow","console","log","searchWordList","tab","index","toString","getTree","bookmarksTree","pushBookmarkListRecursive","parentPath","i","length","bookmark","path","children","currentPath","subscriptions","$watchAsObservable","pipe","pluck","debounceTime","switchMap","map"],"mappings":"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","file":"0.bundle.js","sourcesContent":["import { muff } from 'muff'\nimport Vue from 'vue/dist/vue.esm.js'\nimport VueRx from 'vue-rx'\nimport { from } from 'rxjs';\nimport { pluck, debounceTime, switchMap, map } from 'rxjs/operators'\n\nimport style from '../scss/style.scss'\n\nVue.use(VueRx)\n\nwindow.onload = function() {\n\tinit()\n}\n\nfunction init() {\n\tmuff.setReturnListLength(20)\n\tvueInit()\n}\n\nfunction vueInit() {\n\tlet vm = new Vue({\n\t\tel: '#muffin',\n\t\tdata: {\n\t\t\tinputValue: '',\n\t\t\tcurrentSearchType: null,\n\t\t\tsearchTypes: {\n\t\t\t\thistory:   1,\n\t\t\t\tbookmarks: 2,\n\t\t\t\ttabs:      3\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\tinit() {\n\t\t\t\tthis.currentSearchType = this.searchTypes.history;\n\t\t\t\t// this.setHistoryTab()\n\t\t\t\tthis.setBookmarksTab()\n\t\t\t\t// this.setTabsTab()\n\t\t\t},\n\t\t\tsearch(inputValue) {\n\t\t\t\treturn new Promise(resolve => {\n\t\t\t\t\tlet results = muff.search(inputValue)\n\t\t\t\t\tresolve(results)\n\t\t\t\t})\n\t\t\t},\n\t\t\tsetSearchResultsToData(results) {\n\t\t\t\treturn results.list\n\t\t\t},\n\t\t\tsetHistoryTab() {\n\t\t\t\tthis.currentSearchType = this.searchTypes.history\n\n\t\t\t\t// 1年分\n\t\t\t\tconst startTime = new Date().getTime() - (1000 * 60 * 60 * 24 * 265)\n\t\t\t\tconst query = {\n\t\t\t\t\ttext: '',\n\t\t\t\t\tstartTime: startTime,\n\t\t\t\t\tmaxResults: 50000\n\t\t\t\t}\n\n\t\t\t\tlet historyList = []\n\t\t\t\tchrome.history.search(query, function (results) {\n\t\t\t\t\tconst reverseResult = results.reverse()\n\t\t\t\t\treverseResult.forEach(function (result) {\n\t\t\t\t\t\t// resultひとつひとつがHistoryItem形式\n\t\t\t\t\t\thistoryList.push({\n\t\t\t\t\t\t\turl: result.url,\n\t\t\t\t\t\t\ttitle: result.title\n\t\t\t\t\t\t})\n\t\t\t\t\t});\n\n\t\t\t\t\tmuff.setSearchWordList(historyList)\n\t\t\t\t})\n\t\t\t},\n\t\t\tsetTabsTab() {\n\t\t\t\tthis.currentSearchType = this.searchTypes.tabs\n\n\t\t\t\tchrome.tabs.query({currentWindow: true}, function(tabs) {\n\t\t\t\t\tconsole.log(tabs)\n\t\t\t\t\tlet searchWordList = []\n\n\t\t\t\t\ttabs.forEach(function(tab, index) {\n\t\t\t\t\t\tsearchWordList.push({\n\t\t\t\t\t\t\tindex: tab.index.toString(),\n\t\t\t\t\t\t\ttitle: tab.title,\n\t\t\t\t\t\t\turl: tab.url\n\t\t\t\t\t\t})\n\t\t\t\t\t});\n\n\t\t\t\t\tconsole.log(searchWordList)\n\t\t\t\t\tmuff.setSearchWordList(searchWordList)\n\t\t\t\t});\n\n\t\t\t\t// メモ\n\t\t\t\t// すでにあるタブを開くには\n\t\t\t\t// chrome.tabs.update(tabs[i].id, {active: true});\n\t\t\t\t// https://stackoverflow.com/questions/36000099/check-if-window-is-already-open-from-a-non-parent-window-chrome-extension\n\t\t\t},\n\t\t\tsetBookmarksTab() {\n\t\t\t\tthis.currentSearchType = this.searchTypes.bookmarks\n\n\t\t\t\tchrome.bookmarks.getTree((bookmarksTree) => {\n\t\t\t\t\tlet searchWordList = []\n\t\t\t\t\tsearchWordList = this.pushBookmarkListRecursive(bookmarksTree, searchWordList)\n\t\t\t\t\tmuff.setSearchWordList(searchWordList)\n\t\t\t\t});\n\t\t\t},\n\t\t\tpushBookmarkListRecursive(bookmarksTree, searchWordList, parentPath) {\n\t\t\t\tconsole.log(parentPath)\n\t\t\t\tif (typeof parentPath == 'undefined') {\n\t\t\t\t\tparentPath = ''\n\t\t\t\t}\n\n\t\t\t\tfor (let i =0; i < bookmarksTree.length; i++) {\n\t\t\t\t\tlet bookmark = bookmarksTree[i];\n\n\t\t\t\t\tif (bookmark.url) {\n\t\t\t\t\t\tsearchWordList.push({\n\t\t\t\t\t\t\tparentPath: parentPath, // TODO: 検索ignoreしたい\n\t\t\t\t\t\t\tpath: parentPath + bookmark.title,\n\t\t\t\t\t\t\ttitle: bookmark.title,\n\t\t\t\t\t\t\turl: bookmark.url\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\n\t\t\t\t\tif (bookmark.children) {\n\n\t\t\t\t\t\tlet currentPath = parentPath + bookmark.title + '/'\n\t\t\t\t\t\tsearchWordList = this.pushBookmarkListRecursive(bookmark.children, searchWordList, currentPath);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn searchWordList\n\t\t\t}\n\t\t},\n\t\tsubscriptions() {\n\t\t\treturn {\n\t\t\t\tresults: this.$watchAsObservable('inputValue').pipe(\n\t\t\t\t\tpluck('newValue'),\n\t\t\t\t\tdebounceTime(500),\n\t\t\t\t\tswitchMap(this.search),\n\t\t\t\t\tmap(this.setSearchResultsToData)\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\t})\n\n\tvm.init()\n}\n","// extracted by mini-css-extract-plugin"],"sourceRoot":""}