<html>
	<head>
		<meta charset="UTF-8">
		<link rel="stylesheet" href="./dist/style.css">
	</head>
	<body>
		<div id="muffin"
			@keydown.down="moveDownSelector"
			@keydown.up="moveUpSelector"
			@keydown.right="nextSearchType"
			@keydown.left="prevSearchType"
			@keydown.tab.exact.prevent="moveDownSelector"
			@keydown.shift.tab.prevent="moveUpSelector"
			@keydown.ctrl.78.prevent="moveDownSelector"
			@keydown.ctrl.80.prevent="moveUpSelector"
			@keydown.ctrl.74.prevent="setNewSearchType(searchTypes.HISTORY)"
			@keydown.ctrl.75.prevent="setNewSearchType(searchTypes.BOOKMARKS)"
			@keydown.ctrl.76.prevent="setNewSearchType(searchTypes.TABS)"
			@keypress.enter="select"
			tabindex="0">

			<header>
				<div id="menu-wrap">
					<div id="menu-clickable-wrap">
						<template v-for="(typeInt, typeName) in searchTypes">
							<span
								v-bind:id="typeName | toLowerCase"
								v-bind:class="{ active: typeInt == currentSearchType }"
								@click="setNewSearchType(typeInt)">
								{{ typeName | toUpperFirst }}
							</span>
						</template>
						<div v-cloak id="select-bar" v-bind:style="{ left: ((currentSearchType - 1) * 100) + 'px'  }"></div>
					</div>
				</div>
				<div id="form">
					<input
						id="search"
						v-model="inputString"
						type="text"
						placeholder="Fuzzy Search"
						v-focus
					>
				</div>
			</header>
			<div id="main">
				<div v-cloak v-if="isShortcutVisible" id="shortcut-list">
					<p>
						Select tab: ←, → or<br />
						History: Ctrl-j<br />
						Bookmark: Ctrl-k<br />
						Tab: Ctrl-l<br />
						Select next item: ↓, tab, Ctrl-n<br />
						Select prev item: ↑, Shift-tab, Ctrl-p
					</p>
				</div>
				<ul v-cloak v-else-if="results && results.length >= 1" @mouseover="resetCurrentSelector" ref="list">
					<template v-if="currentSearchType == searchTypes.HISTORY">
						<template v-for="(result, index) in results">
							<li v-bind:class="{'current-selected': index == currentSelected}">
								<a v-bind:href="result.matches._protocol + result.matches.url" target="_blank">
									<div class="current-select-marker">
										<div class="marker"></div>
									</div>
									<div class="favicon">
										<img v-bind:src="'chrome://favicon/' + result.matches._protocol + result.matches.url">
									</div>
									<div class="item-text">
										<div class="title">
											<template v-if="result.matches.title">
												<span v-html="result.highlighteds.title"></span>
											</template>
											<template v-else>
												(No title.)
											</template>
										</div>
										<div class="url">
											<span v-html="result.highlighteds.url"></span>
										</div>
									</div>
								</a>
							</li>
						</template>
					</template>
					<template v-else-if="currentSearchType == searchTypes.BOOKMARKS">
						<template v-for="(result, index) in results">
							<li v-bind:class="{'current-selected': index == currentSelected}">
								<a v-bind:href="result.matches._protocol + result.matches.url" target="_blank">
									<div class="current-select-marker">
										<div class="marker"></div>
									</div>
									<div class="favicon">
										<img v-bind:src="'chrome://favicon/' + result.matches._protocol + result.matches.url">
									</div>
									<div class="item-text">
										<div class="title">
											<template v-if="result.matches.title">
												<span v-html="result.highlighteds.title"></span>
											</template>
											<template v-else>
												(No title.)
											</template>
										</div>
										<div class="path">
											<span v-html="result.highlighteds._parentPath"></span>
										</div>
										<div class="url">
											<span v-html="result.highlighteds.url"></span>
										</div>
									</div>
								</a>
							</li>
						</template>
					</template>
					<template v-else-if="currentSearchType == searchTypes.TABS">
						<template v-for="(result, index) in results">
							<li v-bind:class="{'current-selected': index == currentSelected}">
								<a v-bind:href="result.matches._protocol + result.matches._protocol + result.matches.url" target="_blank">
									<div class="current-select-marker">
										<div class="marker"></div>
									</div>
									<div class="favicon">
										<img v-bind:src="result.matches._icon">
									</div>
									<div class="item-text">
										<div class="title">
											<span v-html="result.matches._index"></span>
											<template v-if="result.highlighteds.title">:&nbsp;
												<span v-html="result.highlighteds.title"></span>
											</template>
											<template v-else>
												(No title.)
											</template>
										</div>
										<div class="url">
											<span v-html="result.highlighteds.url"></span>
										</div>
									</div>
								</a>
							</li>
						</template>
					</template>
				</ul>
				<div v-else id="logo">
					<img src="./images/logo.png">
				</div>
				<div id="info-bar">
					<div id="shortcuts" @click="toggleShortcutVisible">
						Shortcuts
					</div>
					<div v-cloak v-if="results" id="result-count">
						{{ results.length }} / {{ hitLength }}
					</div>
				</div>
			</div>
		</div>
		<script type="text/javascript" src="./dist/bundle.js"></script>
	</body>
</html>
